<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<script src="http://oauth.googlecode.com/svn/code/javascript/oauth.js"></script>
<script src="http://oauth.googlecode.com/svn/code/javascript/sha1.js"></script>
<script src="./jquery-2.1.4.min.js"></script>
<link rel="stylesheet" type="text/css" href="./main.css">
<title>TwitterClient</title>
</head>
<body>
<h1>Twitter, Client!</h1>
<input id="searchWord" type="search" placeholder="search account">
<input type="submit" value="検索" onclick="getTwitter();">
<script type="text/javascript">
var options = {
  method: "GET",
  apiURL: "https://api.twitter.com/1.1/search/tweets.json?q=",
  count:10,
  consumerKey:"",
  consumerSecret:"",
  accessToken:"",
  tokenSecret:""
};
function getTwitter() {
  var searchWord = document.getElementById('searchWord');
  options.apiURL = options.apiURL + searchWord.value;
  var accessor = {
    consumerSecret: options.consumerSecret,
    tokenSecret: options.tokenSecret
  };
  var message = {
    method: options.method,
    action:options.apiURL,
    parameters: {
      count:options.count,
      oauth_version: "1.0",
      oauth_signature_method: "HMAC-SHA1",
      oauth_consumer_key: options.consumerKey,
      oauth_token: options.accessToken,
      callback: "resultsOutput"
    }
  };
  OAuth.setTimestampAndNonce(message);
  OAuth.SignatureMethod.sign(message,accessor);
  var url = OAuth.addToURL(message.action, message.parameters);
  $.ajax({
    type: message.method,
    url: url,
    dataType: "jsonp",
    jsonp:false,
    cache: true
  });
}

function resultsOutput(data) {
  var statuses = data.statuses;
  for (var i = 0; i < statuses.length; i++) {
    console.log(statuses[i].user.name);
    console.log(statuses[i].user.screen_name);
    console.log(statuses[i].text);
  }
}
</script>
</body>
</html>